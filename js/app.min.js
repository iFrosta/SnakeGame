const canvas=document.querySelector("#game"),ctx=canvas.getContext("2d");let viewpoint=getViewportSize();canvas.width=Math.floor(viewpoint.width),canvas.height=Math.floor(viewpoint.height),console.log("Resolution:",canvas.width,canvas.height);const scale=Math.floor((canvas.width+canvas.height)/50),rows=canvas.height/scale,columns=canvas.width/scale,stats={score:0,maxscore:0,try:0},MaxScoreTag=document.querySelector("#maxscore"),ScoreTag=document.querySelector("#score");let snake,fruit,timeout=100;pre();let executed=!1;window.addEventListener("keydown",()=>{executed||(setup(),executed=!0),document.querySelector("#ai").style.display="none",document.querySelector("#aiOld").style.display="none"});function pre(){snake=new Snake,fruit=new Fruit,fruit.color=getRandomColor(),fruit.pickLocation(),ScoreTag.innerHTML="Press any <strong>button</strong>"}function setup(){window.setInterval(()=>{ctx.clearRect(0,0,canvas.width,canvas.height),fruit.draw(),snake.update(),snake.draw(),snake.eat(fruit)&&(fruit.pickLocation(),snake.total++,stats.score=snake.total,fruit.color=getRandomColor()),snake.checkCollision(),ScoreTag.innerText=stats.score,stats.score>stats.maxscore&&(stats.maxscore=stats.score),1<=stats["try"]&&(MaxScoreTag.innerText=stats.maxscore)},timeout)}window.addEventListener("keydown",a=>{const b=a.key.replace("Arrow","");snake.changeDirection(b)});